================================================================================
DOCUMENTACIÓN DEL BOUNDED CONTEXT POST
================================================================================

Proyecto: JEE API - Tesis
Patrón: Domain-Driven Design (DDD) + CQRS
Fecha: Noviembre 2024

================================================================================
DOCUMENTOS DISPONIBLES (8 archivos, ~7000 líneas de documentación)
================================================================================

1. QUICK_START.md (5-10 minutos)
   ├─ Conceptos clave: JWT, CQRS, Inyección
   ├─ Ejemplo real: Crear un post
   ├─ Ejemplo real: Buscar posts
   ├─ Checklist de comprensión
   ├─ Crear tu primer endpoint (paso a paso)
   └─ Errores comunes y soluciones

2. BOUNDED_CONTEXT_POST_GUIDE.md (30-45 minutos)
   ├─ Diagrama de arquitectura general
   ├─ JWT Middleware (detallado)
   ├─ Clase base ApiController + ejemplos
   ├─ Request DTOs (4 ejemplos)
   ├─ Commands (4 ejemplos)
   ├─ Queries (4 ejemplos)
   ├─ Handlers (CommandHandler, QueryHandler)
   ├─ Responses (8 ejemplos)
   ├─ Configuración de rutas (archivo completo)
   ├─ 2 flujos completos de ejecución
   ├─ Patrones y buenas prácticas
   ├─ Checklist de implementación
   └─ Referencias rápidas (tablas)

3. POST_CONTEXT_ADVANCED_PATTERNS.md (30-40 minutos)
   ├─ Value Objects (BodyValue, CommentValue, ImageValue)
   ├─ Domain Events (cómo se crean y publican)
   ├─ Repositories (interfaz e implementación MySQL)
   ├─ Use cases complejos (crear post con recursos, dar like)
   ├─ Validación multinivel (4 niveles)
   ├─ Handling de recursos (workflow completo)
   ├─ Excepciones de dominio (mapeo a HTTP)
   └─ Testabilidad (unit tests, integration tests)

4. IMPLEMENTATION_CHECKLIST.md (15-20 minutos)
   ├─ Ejemplo: Endpoint "Compartir Post"
   ├─ 10 pasos detallados con código
   ├─ Plantillas copiar-pegar
   ├─ Checklist final (11 items)
   ├─ Flujo de ejecución resumido
   └─ Troubleshooting (3 problemas comunes)

5. CODE_TEMPLATES.md (referencia rápida)
   ├─ Plantilla: Command
   ├─ Plantilla: CommandHandler
   ├─ Plantilla: Use Case
   ├─ Plantilla: Query
   ├─ Plantilla: QueryHandler
   ├─ Plantilla: Controller para Command
   ├─ Plantilla: Controller para Query
   ├─ Plantilla: Request DTO Simple
   ├─ Plantilla: Request DTO con BaseRequest
   ├─ Plantilla: Response Individual
   ├─ Plantilla: Response Colección
   ├─ Plantilla: Domain Event
   ├─ Plantilla: Domain Exception
   ├─ Plantilla: Ruta YAML
   ├─ Ejemplo completo: Compartir Post
   └─ Template de Test

6. POST_CONTEXT_FILE_REFERENCE.md (5-10 minutos - referencia)
   ├─ Árbol completo de directorios
   ├─ Tablas por tipo de archivo:
   │  ├─ Controllers
   │  ├─ Request DTOs
   │  ├─ Commands & Handlers
   │  ├─ Queries & Handlers
   │  ├─ Response DTOs
   │  ├─ Entidades de dominio
   │  ├─ Value Objects
   │  ├─ Domain Events
   │  ├─ Exceptions
   │  └─ Repositories
   ├─ Patrones de nombres
   ├─ Capas y responsabilidades
   ├─ Flujos de datos
   └─ Búsqueda rápida (Q&A)

7. DOCUMENTATION_SUMMARY.md (15-20 minutos)
   ├─ Resumen de cada documento
   ├─ Cómo usar documentación (por caso)
   ├─ Estructura de ejemplo completo
   ├─ Patrones clave
   ├─ Antes vs Después (comparación)
   ├─ Estructura mental (diagrama)
   ├─ Checklist de comprensión
   ├─ Glosario rápido
   ├─ Próximos pasos (aprender más)
   └─ Índice de documentos

8. POST_CONTEXT_README.md (guía de navegación)
   ├─ Inicio rápido (qué leer según caso)
   ├─ Estructura de directorios
   ├─ Flujo de request (diagrama)
   ├─ Patrones clave (5 conceptos)
   ├─ Checklist para empezar
   ├─ Ejemplos de endpoints existentes
   ├─ Validación de implementación
   ├─ Convenciones de nombres
   ├─ Preguntas frecuentes
   ├─ Errores comunes
   ├─ Recursos adicionales
   └─ Mapa mental rápido

================================================================================
CÓMO USAR ESTA DOCUMENTACIÓN
================================================================================

SI ERES NUEVO EN EL PROYECTO:
  1. Lee QUICK_START.md (5-10 min) → Conceptos básicos
  2. Lee BOUNDED_CONTEXT_POST_GUIDE.md (30-45 min) → Arquitectura completa
  3. Lee POST_CONTEXT_ADVANCED_PATTERNS.md (30-40 min) → Profundizar
  4. Estudia un endpoint existente (CreatePostController)
  5. Implementa un pequeño cambio

SI NECESITAS IMPLEMENTAR UN ENDPOINT:
  1. Abre IMPLEMENTATION_CHECKLIST.md
  2. Abre CODE_TEMPLATES.md
  3. Sigue los 10 pasos
  4. Usa plantillas para copiar-pegar
  5. Completa checklist final

SI BUSCAS ALGO ESPECÍFICO:
  1. Abre POST_CONTEXT_FILE_REFERENCE.md
  2. Usa sección "Búsqueda Rápida"
  3. O busca en tablas por tipo

SI NO SABES DÓNDE EMPEZAR:
  1. Lee DOCUMENTATION_SUMMARY.md (visión general)
  2. Lee POST_CONTEXT_README.md (guía de navegación)

================================================================================
ARCHIVOS CLAVE DEL PROYECTO
================================================================================

CONFIGURACIÓN:
  └─ config/routes/web/post.yaml          (Define rutas)
  └─ config/services.yaml                 (Inyección de dependencias)

CAPA DE APLICACIÓN (HTTP):
  └─ src/Apps/Web/Post/
     ├─ Create/                           (CreatePostController, CreatePostRequest)
     ├─ Find/                             (FindPostController)
     ├─ Like/                             (LikePostController)
     ├─ Delete/                           (DeletePostController)
     ├─ Search/                           (SearchPostsController, SearchPostsRequest)
     ├─ SearchMyFeed/                     (SearchMyFeedController)
     └─ ... (más acciones)

CAPA DE APLICACIÓN (LÓGICA):
  └─ src/Contexts/Web/Post/Application/
     ├─ Create/                           (CreatePostCommand, CreatePostCommandHandler, PostCreator)
     ├─ Find/                             (FindPostQuery, FindPostQueryHandler, PostFinder)
     ├─ Like/                             (LikePostCommand, LikePostCommandHandler, PostLiker)
     ├─ Delete/                           (DeletePostCommand, DeletePostCommandHandler, PostDeleter)
     ├─ Search/                           (SearchPostQuery, SearchPostQueryHandler, PostSearcher)
     ├─ SearchMyFeed/                     (SearchMyFeedQuery, SearchMyFeedQueryHandler, MyFeedSearcher)
     └─ Shared/                           (Response DTOs: PostResponse, PostCollectionResponse, etc.)

CAPA DE DOMINIO:
  └─ src/Contexts/Web/Post/Domain/
     ├─ Post.php                          (Agregado raíz)
     ├─ Comment.php                       (Entidad)
     ├─ Like.php                          (Entidad)
     ├─ PostRepository.php                (Interfaz)
     ├─ CommentRepository.php             (Interfaz)
     ├─ LikeRepository.php                (Interfaz)
     ├─ Events/                           (PostCreatedDomainEvent, PostLikedDomainEvent, etc.)
     ├─ Exception/                        (PostNotFoundException, PostAlreadyExistsException, etc.)
     └─ ValueObject/                      (BodyValue, CommentValue, ImageValue)

CAPA DE INFRAESTRUCTURA:
  └─ src/Contexts/Web/Post/Infrastructure/
     └─ Persistence/                      (MysqlPostRepository, MysqlCommentRepository, etc.)

AUTENTICACIÓN COMPARTIDA:
  └─ src/Contexts/Shared/Infrastructure/Symfony/
     ├─ JwtAuthMiddleware.php             (Valida JWT y extrae sessionId)
     └─ ApiController.php                 (Clase base para controllers)

================================================================================
CONCEPTOS FUNDAMENTALES
================================================================================

1. CAPAS:
   ┌──────────────────────────────────┐
   │ Presentación (Apps/Web/Post/)    │ ← Controllers + Request DTOs
   ├──────────────────────────────────┤
   │ Aplicación (Application/)        │ ← Commands/Queries + Handlers + Use Cases
   ├──────────────────────────────────┤
   │ Dominio (Domain/)                │ ← Agregados + Value Objects + Repositories
   ├──────────────────────────────────┤
   │ Infraestructura (Infrastructure/)│ ← Repository implementations
   └──────────────────────────────────┘

2. CQRS (Command Query Responsibility Segregation):
   Commands = Escriben (Create, Update, Delete)
   Queries = Leen (Find, Search)

3. FLUJO DE REQUEST:
   HTTP → Middleware JWT → Controller → Request DTO → Command/Query → Handler → Use Case → Repository

4. INYECCIÓN DE DEPENDENCIAS:
   Automática en __construct() por tipo

5. AUTENTICACIÓN:
   Ruta con defaults: { auth: true } → Middleware valida JWT → Extrae userId → Lo pasa como sessionId

================================================================================
ENDPOINTS EXISTENTES (EJEMPLOS PARA ESTUDIAR)
================================================================================

CREATE:
  PUT /api/post/{id}
  └─ CreatePostController → CreatePostCommand → PostCreator

READ:
  GET /api/post/{id}
  └─ FindPostController → FindPostQuery → PostFinder

SEARCH:
  GET /api/posts?q=limit:10;offset:0
  └─ SearchPostsController → SearchPostQuery → PostSearcher

ACTION (Like):
  PUT /api/post/{id}/like
  └─ LikePostController → LikePostCommand → PostLiker

ACTION (Delete):
  DELETE /api/post/{id}/delete
  └─ DeletePostController → DeletePostCommand → PostDeleter

================================================================================
PATRONES DE NOMBRES
================================================================================

Controllers:           {Action}PostController
Commands:              {Action}PostCommand
Queries:               {Action}PostQuery, Search{Entity}Query
Handlers:              {Action}PostCommandHandler, {Action}PostQueryHandler
Use Cases:             {Action}Post (ej: PostCreator)
Request DTOs:          {Action}PostRequest
Response DTOs:         {Entity}Response, {Entity}CollectionResponse
Domain Events:         Post{Action}DomainEvent
Exceptions:            {ErrorDescription}Exception
Repositories:          {Entity}Repository (interfaz)
Repo Impl:             Mysql{Entity}Repository

================================================================================
VALIDACIÓN MULTINIVEL
================================================================================

Nivel 1: HTTP (Symfony Request Validation)
  └─ Atributos en Request DTO

Nivel 2: DTO (Lógica de mapeo)
  └─ Método validateRequest() en controller

Nivel 3: Domain (Value Objects)
  └─ Constructor de BodyValue lanza excepciones

Nivel 4: Use Case (Reglas de negocio)
  └─ PostLiker verifica que no exista like duplicado

================================================================================
EJEMPLOS PRÁCTICOS
================================================================================

Ver QUICK_START.md para:
  • Crear un post (flujo completo)
  • Buscar posts (flujo simplificado)
  • Crear tu primer endpoint (5 pasos)

Ver CODE_TEMPLATES.md para:
  • Plantillas listas para copiar-pegar
  • Ejemplo completo: Endpoint "Compartir Post"

Ver IMPLEMENTATION_CHECKLIST.md para:
  • Guía paso a paso con checklist
  • 10 pasos para implementar

================================================================================
HERRAMIENTAS Y VERSIONES
================================================================================

Framework:      Symfony 6+
ORM:            Doctrine
Database:       MySQL
Testing:        PHPUnit
Language:       PHP 8.1+

================================================================================
TIEMPO DE LECTURA ESTIMADO
================================================================================

Quick Start:                        5-10 min
BOUNDED_CONTEXT_POST_GUIDE:         30-45 min
POST_CONTEXT_ADVANCED_PATTERNS:     30-40 min
IMPLEMENTATION_CHECKLIST:           15-20 min
CODE_TEMPLATES:                     5-10 min (referencia)
POST_CONTEXT_FILE_REFERENCE:        5-10 min (referencia)
DOCUMENTATION_SUMMARY:              15-20 min
POST_CONTEXT_README:                10-15 min

Total para entender profundamente:   ~2 horas

================================================================================
PRÓXIMOS PASOS
================================================================================

1. Lee QUICK_START.md (empezar aquí)
2. Lee BOUNDED_CONTEXT_POST_GUIDE.md (entender profundidad)
3. Abre src/Apps/Web/Post/Create/CreatePostController.php (estudiar)
4. Implementa un pequeño cambio (valor)
5. Lee POST_CONTEXT_ADVANCED_PATTERNS.md (dominar)
6. Implementa un nuevo endpoint (usar IMPLEMENTATION_CHECKLIST.md)

================================================================================
REFERENCIAS RÁPIDAS
================================================================================

¿Dónde está...?
  • Controllers → src/Apps/Web/Post/{Action}/
  • Commands → src/Contexts/Web/Post/Application/{Action}/
  • Queries → src/Contexts/Web/Post/Application/{Action}/
  • Handlers → src/Contexts/Web/Post/Application/{Action}/
  • Use Cases → src/Contexts/Web/Post/Application/{Action}/
  • Responses → src/Contexts/Web/Post/Application/Shared/
  • Agregados → src/Contexts/Web/Post/Domain/
  • Value Objects → src/Contexts/Web/Post/Domain/ValueObject/
  • Exceptions → src/Contexts/Web/Post/Domain/Exception/
  • Events → src/Contexts/Web/Post/Domain/Events/
  • Repositories → src/Contexts/Web/Post/Infrastructure/Persistence/

¿Cómo...?
  • Autenticar: Ver JwtAuthMiddleware en guía
  • Validar: Ver "Validación Multinivel" en guía
  • Crear endpoint: Ver IMPLEMENTATION_CHECKLIST.md
  • Copiar plantilla: Ver CODE_TEMPLATES.md
  • Encontrar archivo: Ver POST_CONTEXT_FILE_REFERENCE.md

================================================================================
SOPORTE Y PREGUNTAS
================================================================================

1. Busca en "Búsqueda Rápida" de POST_CONTEXT_FILE_REFERENCE.md
2. Lee POST_CONTEXT_README.md → "Preguntas Frecuentes"
3. Ve ejemplos en src/Apps/Web/Post/
4. Estudia los tests en tests/Feature/Apps/Web/Post/

================================================================================
ÚLTIMA ACTUALIZACIÓN: Noviembre 2024
VERSIÓN DE DOCUMENTACIÓN: 1.0
PROYECTO: JEE API - Tesis
BOUNDED CONTEXT: Post
PATRÓN: DDD + CQRS
================================================================================
